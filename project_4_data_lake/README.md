# Data Lake
## Project Overview
- The purpose of this project is to design da5a lake for analysis of music streaming services.
- This project has a song play log table as a fact table and songs, artists, users, and time table as dimension.
- This project is based on AWS (S3, EMR).

## Run Project
1. Make S3 bucket.

2. Write dl.cfg in parent directory. Template is
```
[AWS]
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
```

3. Modify output_data of etl.py.

4. Run python etl.py.

## Data in S3
- Song data is subset of [Million Song Dataset](http://millionsongdataset.com/).
- Song data format is
```json
{
    "num_songs": 1, 
    "artist_id": "ARJIE2Y1187B994AB7", 
    "artist_latitude": null, 
    "artist_longitude": null, 
    "artist_location": "", 
    "artist_name": "Line Renaud", 
    "song_id": "SOUPIRU12A6D4FA1E1", 
    "title": "Der Kleine Dompfaff", 
    "duration": 152.92036, 
    "year": 0
}
```

- Log data is generated by [event simulator](https://github.com/Interana/eventsim).
- Log data format is
```json
{
    "artist":null,
    "auth":"Logged In",
    "firstName":"Walter",
    "gender":"M",
    "itemInSession":0,
    "lastName":"Frye",
    "length":null,
    "level":"free",
    "location":"San Francisco-Oakland-Hayward, CA",
    "method":"GET",
    "page":"Home",
    "registration":1540919166796.0,
    "sessionId":38,
    "song":null,
    "status":200,
    "ts":1541105830796,
    "userAgent":"\"Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_9_4) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/36.0.1985.143 Safari\/537.36\"",
    "userId":"39"
}
```

## Schema
- Star schema
- Fact Table
> songplay
- Dimension Table
> user, song, artist, time

### Reference
- [Udacity Data Engineer](https://www.udacity.com/course/data-engineer-nanodegree--nd027)
